webpackJsonp([9],{"0OxF":function(t,e){},m6fE:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});s("EMlb");var a=s("TIfe"),o=s("lPwG"),r={data:function(){return{headers:{Authorization:Object(a.a)()},address:"http://120.79.239.141:8080/",worksDialogVisible:!0,worksData:{worksName:"",worksDescribe:"",price:"",worksAttachmentList:[]},projectAttachment:"",projectAttachmentList:[]}},methods:{uploadUrl:function(){return"/api/works/upload"},handleExceed:function(){this.$message({type:"error",message:"最多只能上传3个文件！,共选择了 "+this.fileList.length+" 个文件！"})},onBeforeUpload:function(t){var e="image/jpeg"===t.type||"image/png"===t.type,s=t.size/1024/1024<3;return e?s?e&&s:(this.$message({type:"error",message:"上传文件大小不能超过1M!"}),!1):(this.$message({type:"error",message:"上传文件只能是jpeg/png格式!"}),!1)},onSuccess:function(t){this.projectAttachment=t.data[0],this.projectAttachmentList.push(this.projectAttachment),this.$message({type:"success",message:"文件上传成功！"})},uploadWorks:function(){var t=this;if(this.worksData.worksAttachmentList){this.worksData.worksAttachmentList=this.projectAttachmentList;var e=this.worksData;Object(o.i)(e).then(function(e){t.$message({type:"success",message:"作品上传成功！"}),t.$router.push({name:"StudentHomepage"})}).catch(function(t){console.log("作品上传表单失败！")})}else this.$message({type:"warning",message:"作品上传必须上传1-3个作品哦"})},modifyWorks:function(t){var e=this,s=this.worksData;Object(o.g)(s).then(function(t){e.$message({type:"success",message:"作品信息修改成功！"}),e.$router.push({name:"StudentHomepage"})}).catch(function(t){console.log("作品更新失败！")})}},mounted:function(){var t=this;if(this.$route.params.id){var e={worksId:this.$route.params.id};Object(o.d)(e).then(function(e){t.worksData=e.data}).catch(function(t){console.log("查看作品详情失败！")})}}},i={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container"},[t.worksData.worksAttachmentList.length>0?s("div",{staticClass:"dialog-container"},[s("div",{staticClass:"swiper-container"},[s("el-carousel",{attrs:{interval:4e3,type:"card",height:"300px"}},t._l(t.worksData.worksAttachmentList,function(e,a){return s("el-carousel-item",{key:a},[s("img",{attrs:{src:t.address+e.attachmentPath,alt:"list.attachmentName"}})])}))],1)]):t._e(),t._v(" "),s("div",{staticClass:"main"},[s("div",{staticClass:"title"},[!t.worksData.worksAttachmentList.length>0?s("h2",[t._v("上传您的作品")]):t._e(),t._v(" "),t.worksData.worksAttachmentList.length>0?s("h2",[t._v("修改您的作品信息")]):t._e()]),t._v(" "),s("div",{staticClass:"works-form-container"},[s("el-form",{ref:"worksData",attrs:{"status-icon":"",model:t.worksData}},[s("el-form-item",{attrs:{label:"为您的作品取个名字吧"}},[s("el-input",{attrs:{placeholder:"作品名称..."},model:{value:t.worksData.worksName,callback:function(e){t.$set(t.worksData,"worksName",e)},expression:"worksData.worksName"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"作品描述"}},[s("div",{staticClass:"form-description"},[s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.worksData.worksDescribe,expression:"worksData.worksDescribe"}],attrs:{placeholder:"请介绍您的作品..."},domProps:{value:t.worksData.worksDescribe},on:{input:function(e){e.target.composing||t.$set(t.worksData,"worksDescribe",e.target.value)}}})])]),t._v(" "),!t.worksData.worksAttachmentList.length>0?s("div",{staticClass:"form-upload"},[s("el-upload",{ref:"upload",attrs:{action:t.uploadUrl(),headers:t.headers,accept:"image/jpeg, image/png",limit:3,"on-exceed":t.handleExceed,"auto-upload":!0,"before-upload":t.onBeforeUpload,"on-success":t.onSuccess,multiple:!0,"list-type":"picture"}},[s("el-button",{staticClass:"upload-file-button"},[t._v("点击上传")]),t._v(" "),s("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("可上传任何能帮助你描述项目的图片")]),t._v(" "),s("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("只能上传jpg/png文件，且不超过1M")])],1)],1):t._e(),t._v(" "),s("el-form-item",{attrs:{label:"报价"}},[s("br"),t._v(" "),s("div",{staticClass:"form-budget",staticStyle:{border:"0.06rem solid #d7d7d7",display:"flex",width:"250px","border-radius":"8px"}},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.worksData.price,expression:"worksData.price"}],staticStyle:{outline:"none",width:"100px",border:"none","margin-left":"1rem"},domProps:{value:t.worksData.price},on:{input:function(e){e.target.composing||t.$set(t.worksData,"price",e.target.value)}}}),t._v(" "),s("div",{staticClass:"RMB",staticStyle:{border:"none",height:"1.8rem","margin-top":".2rem","padding-left":"2rem","padding-right":"2rem","border-left":"0.06rem solid #d7d7d7"}},[s("span",[t._v("RMB")])])])])],1),t._v(" "),!t.worksData.worksAttachmentList.length>0?s("button",{staticClass:"upload-works-button",on:{click:function(e){t.uploadWorks()}}},[t._v("上传作品")]):t._e(),t._v(" "),t.worksData.worksAttachmentList.length>0?s("button",{staticClass:"upload-works-button",on:{click:function(e){t.modifyWorks(t.worksData.id)}}},[t._v("修改作品")]):t._e()],1)])])},staticRenderFns:[]};var n=s("VU/8")(r,i,!1,function(t){s("0OxF")},"data-v-7cfe980c",null);e.default=n.exports}});
//# sourceMappingURL=9.df2dfbb010baaf78b4a1.js.map