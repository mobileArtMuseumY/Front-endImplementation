webpackJsonp([4],{O7ay:function(e,t){},YvWb:function(e,t){},z4Qd:function(e,t,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=l("Dd8w"),a=l.n(r),s=l("EMlb"),o=(l("vMJZ"),l("TIfe")),i=l("NYxO"),n={data:function(){return{title:"告诉我们您需要完成的事情",projectAttachmentList:"",headers:{Authorization:Object(o.a)()},transaPeriod:"",ruleForm:{projectName:"",textarea:"",selecSkill:[],bidPeriod:"",budget:"",transaPeriod:Number},projectSkill:[],skills:[],fileData:{projectId:Number},fileList:[],options:[{value:"选项1",label:"15"},{value:"选项2",label:"20"},{value:"选项3",label:"25"},{value:"选项4",label:"30"}]}},computed:a()({},Object(i.b)(["user"])),methods:{uploadUrl:function(){return"/api/project/upload"},handleExceed:function(){this.$message({type:"error",message:"最多只能上传3个文件！,共选择了 "+this.fileList.length+" 个文件！"})},onBeforeUpload:function(e){var t="image/jpeg"===e.type||"image/png"===e.type,l=e.size/1024/1024<3;return t?l?t&&l:(this.$message({type:"error",message:"上传文件大小不能超过1M!"}),!1):(this.$message({type:"error",message:"上传文件只能是jpeg/png格式!"}),!1)},onSuccess:function(e){this.projectAttachmentList=e.data,this.$message({type:"success",message:"文件上传成功！"})},changeValueOfTransaPeriod:function(e){var t;t=this.options.find(function(t){return t.value===e}),this.ruleForm.transaPeriod=parseInt(t.label)},changeValueOfSkills:function(e){this.ruleForm.selecSkill=e},publishProject:function(){var e=this;this.user.signIn?"enterprise"===this.user.role?function(){var t=e.ruleForm.selecSkill,l={};e.ruleForm.selecSkill=[];for(var r=function(r){l=e.skills.find(function(e){return e.value===t[r]}),l={id:r+1,skillName:l.label},e.ruleForm.selecSkill.push(l)},a=0;a<t.length;++a)r(a);var o={projectName:e.ruleForm.projectName,projectDescription:e.ruleForm.textarea,skillList:e.ruleForm.selecSkill,tenderPeriod:e.ruleForm.bidPeriod,budget:e.ruleForm.budget,expectedTime:e.ruleForm.transaPeriod,projectAttachmentList:e.projectAttachmentList};Object(s.e)(o).then(function(t){e.$message({type:"success",message:"提交成功！"}),e.$router.push({name:"EnterpriseHomepage"})}).catch(function(e){console.log("项目发布表单提交失败！")})}():this.$message({type:"warning",message:"只有企业才能发布项目哦~"}):this.$message({type:"warning",message:"您需要先登录才能发布项目哦~"})}},mounted:function(){var e=this;Object(s.d)().then(function(t){e.projectSkill=t.data;for(var l=0;l<e.projectSkill.length;++l){var r=[];r.value="选项"+(l+1),r.label=e.projectSkill[l].skillName,e.skills.push(r)}}).catch(function(e){console.log(e)})}},u={render:function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",{staticClass:"container"},[l("div",{staticClass:"main"},[l("div",{staticClass:"main-inner"},[l("div",{staticClass:"title"},[e._v(e._s(e.title))]),e._v(" "),l("div",{staticClass:"content"},[l("el-form",{ref:"ruleForm",staticClass:"ruleForm",attrs:{model:e.ruleForm}},[l("el-form-item",{attrs:{label:"为您的项目取个名字吧"}},[l("el-input",{attrs:{placeholder:"创建项目名称..."},model:{value:e.ruleForm.projectName,callback:function(t){e.$set(e.ruleForm,"projectName",t)},expression:"ruleForm.projectName"}})],1),e._v(" "),l("el-form-item",{attrs:{label:"告诉我们更多关于您项目的信息"}},[l("el-input",{attrs:{type:"textarea",placeholder:"请输入您项目的详细信息..."},model:{value:e.ruleForm.textarea,callback:function(t){e.$set(e.ruleForm,"textarea",t)},expression:"ruleForm.textarea"}})],1),e._v(" "),l("div",{staticClass:"upload"},[l("el-upload",{ref:"upload",attrs:{action:e.uploadUrl(),headers:e.headers,accept:"image/jpeg, image/png",limit:3,"on-exceed":e.handleExceed,"auto-upload":!0,"before-upload":e.onBeforeUpload,"on-success":e.onSuccess,multiple:!0,"list-type":"picture"}},[l("el-button",{staticClass:"upload-file-button"},[e._v("点击上传")]),e._v(" "),l("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("可上传任何能帮助你描述项目的图片")]),e._v(" "),l("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传jpg/png文件，且不超过1M")])],1)],1)],1),e._v(" "),l("label",[e._v("您选择需要的技能")]),e._v(" "),l("el-select",{attrs:{multiple:"",filterable:"",placeholder:"搜索技能..."},on:{change:e.changeValueOfSkills},model:{value:e.ruleForm.selecSkill,callback:function(t){e.$set(e.ruleForm,"selecSkill",t)},expression:"ruleForm.selecSkill"}},e._l(e.skills,function(e){return l("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),e._v(" "),l("br"),e._v(" "),l("el-form",{ref:"ruleForm",attrs:{model:e.ruleForm}},[l("el-form-item",{attrs:{label:"您项目投标时间段为？"}},[l("el-input",{attrs:{type:"number",placeholder:"时间为1-10天..."},model:{value:e.ruleForm.bidPeriod,callback:function(t){e.$set(e.ruleForm,"bidPeriod",e._n(t))},expression:"ruleForm.bidPeriod"}})],1),e._v(" "),l("el-form-item",{attrs:{label:"您大致的预算是多少？"}},[l("el-input",{attrs:{type:"number",placeholder:"预算估计..."},model:{value:e.ruleForm.budget,callback:function(t){e.$set(e.ruleForm,"budget",e._n(t))},expression:"ruleForm.budget"}})],1)],1),e._v(" "),l("label",[e._v("您预计的项目交易时间(从您确定投稿者到您项目结束)是多少天？")]),e._v(" "),l("el-select",{attrs:{placeholder:"请选择"},on:{change:e.changeValueOfTransaPeriod},model:{value:e.transaPeriod,callback:function(t){e.transaPeriod=t},expression:"transaPeriod"}},e._l(e.options,function(e){return l("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),e._v(" "),l("button",{staticClass:"publish-project-button",on:{click:function(t){e.publishProject()}}},[e._v("发布项目")])],1)])])])},staticRenderFns:[]};var c=l("VU/8")(n,u,!1,function(e){l("O7ay"),l("YvWb")},"data-v-391ba322",null);t.default=c.exports}});
//# sourceMappingURL=4.a756ef85c897ec29d890.js.map